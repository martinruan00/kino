(this.webpackJsonpkino=this.webpackJsonpkino||[]).push([[0],{44:function(e,t,a){e.exports=a(80)},49:function(e,t,a){},50:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},51:function(e,t,a){},69:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(41),c=a.n(i),o=(a(49),a(50),a(5)),s=a(23),l=(a(51),a(4)),u=a(3),m=a(6),h=a(7),d=a(8),v="https://omdbapi.com",p="aa25ad59",f=a(28),b=a.n(f),y=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"searchByType",value:function(e,t,a){var n="".concat(v,"/?apikey=").concat(p,"&s=").concat(e,"&type=").concat(t,"&y=").concat(a,"&r=json&page=1");return b.a.get(n)}},{key:"searchById",value:function(e){var t="".concat(v,"/?apikey=").concat(p,"&i=").concat(e,"&plot=full");return b.a.get(t)}},{key:"searchByName",value:function(e,t,a){var n="".concat(v,"/?apikey=").concat(p,"&t=").concat(e,"&y=").concat(t,"&type=").concat(a);return b.a.get(n)}}]),e}()),k=["movie","series","episode"],g=(a(69),function(e){function t(e){var a;Object(l.a)(this,t),a=Object(m.a)(this,Object(h.a)(t).call(this,e));var n={};return k.forEach((function(e){return n[e]=!0})),a.state=Object.assign(n,{resultList:[],movieName:"",toSearchResult:!1,toMovieDetail:!1}),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row col-12 justify-content-center"},this.redirectToSearchResult(),r.a.createElement("form",{className:"form-inline"},r.a.createElement("div",{className:"input-group"},k.map((function(t){return r.a.createElement("div",{className:"form-check form-check-inline",key:t},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:t,checked:e.state[t],onChange:e.onMovieTypeCheckChanged.bind(e),id:t}),r.a.createElement("label",{className:"form-check-label",htmlFor:t},t))}))),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"form-control",placeholder:"Movie name",type:"text",onKeyPress:this.onKeyPress.bind(this),value:this.state.movieName,onChange:this.handleChange.bind(this)}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(t){return e.setState({toSearchResult:!0})}},"Search")))))}},{key:"onMovieTypeCheckChanged",value:function(e){this.state[e.target.value]=e.target.checked,this.setState(this.state)}},{key:"handleChange",value:function(e){this.state.toSearchResult&&this.setState({toSearchResult:!1}),this.setState({movieName:e.target.value})}},{key:"onSearchTextChanged",value:function(e,t){var a=this;e.preventDefault(),y.searchByType(e.target.value,k.movie).then((function(e){a.setState({resultList:"False"===e.data.Response?[]:e.data.Search})})).catch((function(e){console.log(e)}))}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.setState({toSearchResult:!0})}},{key:"redirectToSearchResult",value:function(){var e=this;if(this.state.toSearchResult)return r.a.createElement(o.a,{to:"/search-result/".concat(this.state.movieName,"&").concat(k.filter((function(t){return e.state[t]})).join(","))})}}]),t}(r.a.Component)),E=a(13),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).movieProperties=["Year","Rated","Released","Runtime","Genre","Director","Writer","Actors","Plot","Language","Country","Awards","DVD","BoxOffice","Production","Website"],a.seriesProperties=["Year","Rated","Released","Runtime","Genre","Director","Writer","Actors","Plot","Language","Country","Awards","totalSeasons"],a.state={movie:null},a.componentDidMount=a.componentDidMount.bind(Object(E.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.searchById(this.props.match.params.id).then((function(t){e.setState({movie:t.data})}))}},{key:"render",value:function(){var e=this.state.movie;if(!e)return null;var t=r.a.createElement(r.a.Fragment,null),a="movie"===e.Type?this.movieProperties:"series"===e.Type?this.seriesProperties:null;return a&&(t=Object.keys(e).map((function(t){return a.indexOf(t)>-1?r.a.createElement("div",null,r.a.createElement("strong",null,t),": ",e[t]):r.a.createElement(r.a.Fragment,null)}))),r.a.createElement("div",{className:"row"},r.a.createElement("h1",{className:"col-12"},this.state.movie.Title),r.a.createElement("div",{className:"col-2"},r.a.createElement("img",{alt:this.state.movie.Title,className:"movie-poster",src:this.state.movie.Poster})),r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"float-left"},t)))}}]),t}(r.a.Component),j=(a(75),a(76),a(19)),N="watch-list",D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).cookies=new j.a,a.state={redirectToDetail:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props.movie,a=null!==(e=this.cookies.get(N))&&void 0!==e?e:[],n=a.indexOf(t.imdbID)>-1?"btn btn-sm btn-danger mt-1":"btn btn-sm btn-primary mt-1";return r.a.createElement("div",{className:"row mt-2",key:t.imdbID},r.a.createElement("div",{className:"col-2"},r.a.createElement("img",{alt:t.Title,className:"movie-poster",src:t.Poster})),r.a.createElement("div",{className:"col-10"},r.a.createElement("div",null,r.a.createElement(s.b,{to:"/movie-detail/".concat(t.imdbID)},t.Title)),r.a.createElement("div",null,"Genre: ",t.Genre),r.a.createElement("div",null,"Released date: ",t.Released),r.a.createElement("div",{className:"row"},t.Ratings.map((function(e){return r.a.createElement("div",{className:"col-3",key:e.Source},r.a.createElement("div",{className:"rating d-inline-block"},r.a.createElement("div",{className:"source"},e.Source),r.a.createElement("div",{className:"value"},e.Value)))}))),r.a.createElement("button",{className:n,onClick:this.toggleWatchlistMovie.bind(this)},a.indexOf(t.imdbID)>-1?"Remove from watchlist":"Add to watchlist")))}},{key:"toggleWatchlistMovie",value:function(){var e=this.cookies.get(N);e||(e=[]);var t=e.indexOf(this.props.movie.imdbID);t>-1?e.splice(t,1):e.push(this.props.movie.imdbID),this.cookies.set(N,e),this.setState(this.state)}}]),t}(r.a.Component),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={movies:[]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="qwertyuiopasdfghjkl".split("").map((function(e){return y.searchByName(e,(new Date).getFullYear(),"movie")}));Promise.all(t).then((function(t){var a=[],n=new Map,r=t.filter((function(e){return"False"!==e.data.Response&&"N/A"!==e.data.Poster})).map((function(e){return e.data})),i=!0,c=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;n.has(u.imdbID)||(n.set(u.imdbID,!0),a.push(u))}}catch(m){c=!0,o=m}finally{try{i||null==l.return||l.return()}finally{if(c)throw o}}e.setState({movies:a.sort((function(e,t){return new Date("N/A"===e.Released?864e13:e.Released)<new Date("N/A"===t.Released?864e13:t.Released)?-1:1}))})}))}},{key:"render",value:function(){var e=this.state.movies.length>0?"New movies in ".concat((new Date).getFullYear()):"";return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,e),this.state.movies.map((function(e){return r.a.createElement(D,{movie:e,key:e.imdbID})})))}}]),t}(r.a.Component),w=a(27),R=(a(77),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={genres:[],allMovies:[],filteredMovies:[],selectedGenre:"",orderMoviesBy:""},a.componentDidMount=a.componentDidMount.bind(Object(E.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(E.a)(a)),a.doSearch=a.doSearch.bind(Object(E.a)(a)),a.applyFilter=a.applyFilter.bind(Object(E.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.doSearch()}},{key:"componentDidUpdate",value:function(){this.doSearch()}},{key:"doSearch",value:function(){var e=this;if(this.lastSearchValue!==this.props.match.params.movie){this.lastSearchValue=this.props.match.params.movie;var t=this.props.match.params.movietypes.split(",").map((function(t){return y.searchByType(e.lastSearchValue,t)}));Promise.all(t).then((function(t){var a=t.filter((function(e){return"False"!==e.data.Response})).map((function(e){return e.data.Search.map((function(e){return e.imdbID}))})).flat();0===a.length&&e.setState({allMovies:[],filteredMovies:[]}),Promise.all(a.map((function(e){return y.searchById(e)}))).then((function(t){var a=t.map((function(e){return e.data})),n=Object(w.a)(new Set(a.map((function(e){return e.Genre.split(",")})).flat()));n.unshift("All"),e.setState({allMovies:a,filteredMovies:a,genres:n})}))})).catch((function(e){console.log(e)}))}}},{key:"applyFilter",value:function(){var e=this,t=this.state.allMovies.filter((function(t){return"All"===e.state.selectedGenre||t.Genre.indexOf(e.state.selectedGenre)>-1}));switch(this.state.orderMoviesBy){case M.releasedDate:t=t.sort((function(e,t){return new Date(e.Released)<new Date(t.Released)?-1:1}));break;case M.imdbRating:t=t.sort((function(e,t){return parseFloat(e.imdbRating)<parseFloat(t.imdbRating)?1:-1}));break;case M.title:t=t.sort((function(e,t){return e.Title<t.Title?-1:1}))}this.setState({filteredMovies:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,'Search result for "',this.props.match.params.movie,'"'),r.a.createElement("form",{className:"form-inline"},r.a.createElement("label",{htmlFor:"genre",className:"mr-2"},"Genre"),r.a.createElement("select",{id:"genre",className:"form-control mr-2",value:this.state.selectedGenre,onChange:function(t){return e.setState({selectedGenre:t.target.value},e.applyFilter)}},this.state.genres.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"order-result-by",className:"mr-2"},"Order result by"),r.a.createElement("select",{id:"order-result-by",className:"form-control  mr-2",value:this.state.orderMoviesBy,onChange:function(t){return e.setState({orderMoviesBy:t.target.value},e.applyFilter)}},r.a.createElement("option",{key:M.default.key,value:M.default.key},M.default),r.a.createElement("option",{key:M.releasedDate.key,value:M.releasedDate.key},M.releasedDate),r.a.createElement("option",{key:M.imdbRating.key,value:M.imdbRating.key},M.imdbRating),r.a.createElement("option",{key:M.title.key,value:M.title.key},M.title)))),this.state.filteredMovies.map((function(e){return r.a.createElement(D,{movie:e,key:e.imdbID})})))}}]),t}(r.a.Component)),M={default:"Default",releasedDate:"Released date",imdbRating:"IMDB rating",title:"Title"},C=a(97),F=a(94),B=a(95),I=(a(78),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{position:"static",color:"secondary"},r.a.createElement(F.a,{variant:"dense"},r.a.createElement(B.a,{variant:"h6"},"Kino"),r.a.createElement(s.b,{to:"/watch-list",className:"watch-list btn btn-primary"},"Watch list")))}}]),t}(r.a.Component)),T=(a(79),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).cookies=new j.a,a.state={watchlist:[]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.cookies.get(N).map((function(e){return y.searchById(e)}));Promise.all(t).then((function(t){e.setState({watchlist:t.map((function(e){return e.data}))})}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.watchlist.map((function(e){return r.a.createElement(D,{movie:e,key:e.imdbID})})))}}]),t}(r.a.Component));a(12).createBrowserHistory();var P=function(){return r.a.createElement("div",{className:"App container-fluid"},r.a.createElement(s.a,null,r.a.createElement(I,null),r.a.createElement(g,{className:"searchbar"}),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:S}),r.a.createElement(o.b,{exact:!0,path:"/search-result/:movie&:movietypes",component:R}),r.a.createElement(o.b,{exact:!0,path:"/movie-detail/:id",component:O}),r.a.createElement(o.b,{exact:!0,path:"/watch-list",component:T}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=a(96);c.a.render(r.a.createElement(x.a,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.b6df129a.chunk.js.map