(this.webpackJsonpkino=this.webpackJsonpkino||[]).push([[3],{102:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var n=a(41),i=a(16),r=a(10),l=a(21),s=a(22),o=a(19),c=a(23),m=a(0),u=a.n(m),d=a(31),h=(a(98),a(95)),p=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={genres:[],allMovies:[],filteredMovies:[],selectedGenre:"",orderMoviesBy:""},a.componentDidMount=a.componentDidMount.bind(Object(o.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(o.a)(a)),a.doSearch=a.doSearch.bind(Object(o.a)(a)),a.applyFilter=a.applyFilter.bind(Object(o.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.doSearch()}},{key:"componentDidUpdate",value:function(){this.doSearch()}},{key:"doSearch",value:function(){var e=this;if(this.lastSearchValue!==this.props.match.params.movie){this.lastSearchValue=this.props.match.params.movie;var t=this.props.match.params.movietypes.split(",").map((function(t){return d.a.searchByType(e.lastSearchValue,t)}));Promise.all(t).then((function(t){var a=t.filter((function(e){return"False"!==e.data.Response})).map((function(e){return e.data.Search.map((function(e){return e.imdbID}))})).flat();0===a.length&&e.setState({allMovies:[],filteredMovies:[]}),Promise.all(a.map((function(e){return d.a.searchById(e)}))).then((function(t){var a=t.map((function(e){return e.data})),i=Object(n.a)(new Set(a.map((function(e){return e.Genre.split(",")})).flat()));i.unshift("All"),e.setState({allMovies:a,filteredMovies:a,genres:i})}))})).catch((function(e){console.log(e)}))}}},{key:"applyFilter",value:function(){var e=this,t=this.state.allMovies.filter((function(t){return"All"===e.state.selectedGenre||t.Genre.indexOf(e.state.selectedGenre)>-1}));switch(this.state.orderMoviesBy){case v.releasedDate:t=t.sort((function(e,t){return new Date(e.Released)<new Date(t.Released)?-1:1}));break;case v.imdbRating:t=t.sort((function(e,t){return parseFloat(e.imdbRating)<parseFloat(t.imdbRating)?1:-1}));break;case v.title:t=t.sort((function(e,t){return e.Title<t.Title?-1:1}))}this.setState({filteredMovies:t})}},{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement("h1",null,'Search result for "',this.props.match.params.movie,'"'),u.a.createElement("form",{className:"form-inline"},u.a.createElement("label",{htmlFor:"genre",className:"mr-2"},"Genre"),u.a.createElement("select",{id:"genre",className:"form-control mr-2",value:this.state.selectedGenre,onChange:function(t){return e.setState({selectedGenre:t.target.value},e.applyFilter)}},this.state.genres.map((function(e){return u.a.createElement("option",{key:e,value:e},e)}))),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"order-result-by",className:"mr-2"},"Order result by"),u.a.createElement("select",{id:"order-result-by",className:"form-control  mr-2",value:this.state.orderMoviesBy,onChange:function(t){return e.setState({orderMoviesBy:t.target.value},e.applyFilter)}},u.a.createElement("option",{key:v.default.key,value:v.default.key},v.default),u.a.createElement("option",{key:v.releasedDate.key,value:v.releasedDate.key},v.releasedDate),u.a.createElement("option",{key:v.imdbRating.key,value:v.imdbRating.key},v.imdbRating),u.a.createElement("option",{key:v.title.key,value:v.title.key},v.title)))),this.state.filteredMovies.map((function(e){return u.a.createElement(h.a,{movie:e,key:e.imdbID})})))}}]),t}(u.a.Component),v={default:"Default",releasedDate:"Released date",imdbRating:"IMDB rating",title:"Title"}},94:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={cookieWatchlist:"watch-list"}},95:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(16),i=a(10),r=a(21),l=a(22),s=a(23),o=a(0),c=a.n(o),m=(a(96),a(25)),u=a(24),d=a(94),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).cookies=new u.a,a.state={redirectToDetail:!1},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=this.props.movie,a=null!==(e=this.cookies.get(d.a.cookieWatchlist))&&void 0!==e?e:[],n=a.indexOf(t.imdbID)>-1?"btn btn-sm btn-danger mt-1":"btn btn-sm btn-primary mt-1";return c.a.createElement("div",{className:"row mt-2",key:t.imdbID},c.a.createElement("div",{className:"col-2"},c.a.createElement("img",{alt:t.Title,className:"img-fluid",src:t.Poster})),c.a.createElement("div",{className:"col-10"},c.a.createElement("div",null,c.a.createElement(m.b,{to:"/movie-detail/".concat(t.imdbID)},t.Title)),c.a.createElement("div",null,"Genre: ",t.Genre),c.a.createElement("div",null,"Released date: ",t.Released),c.a.createElement("div",{className:"row"},t.Ratings.map((function(e){return c.a.createElement("div",{className:"col-3",key:e.Source},c.a.createElement("div",{className:"rating d-inline-block"},c.a.createElement("div",{className:"source"},e.Source),c.a.createElement("div",{className:"value"},e.Value)))}))),c.a.createElement("button",{className:n,onClick:this.toggleWatchlistMovie.bind(this)},a.indexOf(t.imdbID)>-1?"Remove from watchlist":"Add to watchlist")))}},{key:"toggleWatchlistMovie",value:function(){var e=this.cookies.get(d.a.cookieWatchlist);e||(e=[]);var t=e.indexOf(this.props.movie.imdbID);t>-1?e.splice(t,1):e.push(this.props.movie.imdbID),this.cookies.set(d.a.cookieWatchlist,e),this.setState(this.state)}}]),t}(c.a.Component)},96:function(e,t,a){},98:function(e,t,a){}}]);
//# sourceMappingURL=3.705e8fd6.chunk.js.map